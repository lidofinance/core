# Lido Protocol Upgrade Parameters - Mainnet Configuration
# This file contains deployment parameters for upgrading Lido protocol contracts on Ethereum mainnet

[chainSpec]
# Ethereum consensus layer specifications
# TODO: take onchain?
slotsPerEpoch = 32                    # Number of slots per epoch in Ethereum consensus
secondsPerSlot = 12                   # Duration of each slot in seconds
genesisTime = 1606824023              # Ethereum mainnet genesis timestamp
depositContract = "0x00000000219ab540356cBB839Cbe05303d7705Fa"  # Official ETH2 deposit contract
isHoodi = false

# Gate seal configuration for vault operations
[gateSealForVaults]
sealDuration = 1209600  # 14 days
sealingCommittee = "0x8772E3a2D86B9347A2688f9bc1808A6d8917760C"

[easyTrack]
trustedCaller = "0x0000000000000000000000000000000000000000"     # Address of stVaults EasyTrack committee # TODO: update the placeholder
initialValidatorExitFeeLimit = "100000000000000000"              # Max validator exit fee which can be spend for single key exit request
# Phase 1: Pilot (starts with Lido V3 upgrade enacted) - https://research.lido.fi/t/lido-v3-design-implementation-proposal/10665
maxGroupShareLimit = "250000000000000000000000"                  # Max share limit which can be set for group by EasyTrack
maxDefaultTierShareLimit = 0                                     # Max share limit which can be set for default tier by EasyTrack

# Must be deployed before the V3 upgrading contracts
[easyTrack.newFactories]
# TODO: update upon deployment
AlterTiersInOperatorGrid = "0x00000000000000000000000000000000000fAc01"
RegisterGroupsInOperatorGrid = "0x00000000000000000000000000000000000fAc02"
RegisterTiersInOperatorGrid = "0x00000000000000000000000000000000000FAc03"
SetJailStatusInOperatorGrid = "0x00000000000000000000000000000000000faC04"
SetLiabilitySharesTargetInVaultHub = "0x00000000000000000000000000000000000FAc05"
SocializeBadDebtInVaultHub = "0x00000000000000000000000000000000000Fac06"
ForceValidatorExitsInVaultHub = "0x00000000000000000000000000000000000faC07"
UpdateGroupsShareLimitInOperatorGrid = "0x00000000000000000000000000000000000FAc08"
UpdateVaultsFeesInOperatorGrid = "0x00000000000000000000000000000000000fac09"

# Vault hub configuration for managing staking vaults
[vaultHub]
relativeShareLimitBP = 3000           # Relative share limit in basis points (30%)

# Lazy oracle configuration for delayed reward calculations - https://github.com/lidofinance/lido-improvement-proposals/blob/develop/LIPS/lip-32.md
[lazyOracle]
quarantinePeriod = 259200                      # Quarantine period in seconds (3 days) before rewards are distributed
maxRewardRatioBP = 350                         # Maximum reward ratio in basis points (3.5%)
maxLidoFeeRatePerSecond = "180000000000000000" # Maximum Lido fee rate per second, in wei (0.18 ETH)

# Predeposit guarantee configuration for validator deposit guarantees
[predepositGuarantee]
genesisForkVersion = "0x00000000"     # Ethereum mainnet genesis fork version
gIndex = "0x0000000000000000000000000000000000000000000000000096000000000028"  # Generalized index for state verification
gIndexAfterChange = "0x0000000000000000000000000000000000000000000000000096000000000028"
changeSlot = 0                        # Slot number when the change takes effect

# Operator grid configuration for managing staking operators
[operatorGrid]
# Default tier parameters for operator classification and fee structure
[operatorGrid.defaultTierParams]
shareLimitInEther = "250"             # Share limit per tier in ETH
reserveRatioBP = 2000                 # Reserve ratio in basis points (20%)
forcedRebalanceThresholdBP = 1800     # Threshold for forced rebalancing in basis points (18%)
infraFeeBP = 500                      # Infrastructure fee in basis points (5%)
liquidityFeeBP = 400                  # Liquidity provision fee in basis points (4%)
reservationFeeBP = 100                # Reservation fee in basis points (1%)

[burner]
isMigrationAllowed = true             # Must be on for the upgrade to work (for scratch is it false)

# Oracle and consensus version configuration
[oracleVersions]
ao_consensus_version = 4              # Accounting Oracle consensus version

[v3VoteScript]
# Expiry timestamp after which the upgrade transaction will revert
# Format: Unix timestamp (seconds since epoch)
# The upgrade transaction must be executed before this deadline
expiryTimestamp = 1765324800          # December 10, 2025 00:00:00 UTC
# Initial maximum external ratio in basis points for Lido v3
initialMaxExternalRatioBP = 300      # 3% value set upon upgrade for the initial phase

# Sources (todo)
# - https://research.lido.fi/t/default-risk-assessment-framework-and-fees-parameters-for-lido-v3-stvaults/10504
